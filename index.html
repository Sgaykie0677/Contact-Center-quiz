<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Contact Center Playbook Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 32px; background: #f6f7fb; color: #222; }
    .container { max-width: 700px; margin: 0 auto; }
    .card { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 16px; }
    .question-title { font-weight: 600; margin-bottom: 10px; }
    .options label { display: block; margin: 6px 0; cursor: pointer; }
    .feedback { margin-top: 8px; font-size: 13px; font-style: italic; }
    .feedback.correct { color: green; }
    .feedback.incorrect { color: red; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Contact Center Playbook Quiz</h1>
    <div class="card">
      <label for="sectionSelect">Choose a section:</label>
      <select id="sectionSelect">
        <option value="member">Member Verification & Eligibility</option>
      </select>
      <button onclick="startQuiz()">Start Quiz</button>
    </div>
    <div class="card">
      <div id="quiz"></div>
      <button id="submitBtn" onclick="submitAnswer()" style="display:none;">Submit Answer</button>
      <button id="nextBtn" onclick="nextQuestion()" style="display:none;">Next</button>
      <div id="result"></div>
    </div>
  </div>

  <script>
    const DEFINITIONS = {
      "Eligibility": "Verification that the caller is an active member with valid coverage."
    };

    const QUESTIONS = [
      {section:"member", q:"What is the first step when handling a Clinical Review call?", options:["Verify member identity","Check escalation protocol"], a:0, expl:"Always verify member identity first.", term:"Eligibility", playbookLang:"Per playbook: 'Begin every call by verifying the member’s identity using two approved identifiers.'"},
      {section:"member", q:"If verification fails after multiple attempts:", options:["End call and note failure","Proceed anyway"], a:0, expl:"End call and note failure.", term:"Eligibility", playbookLang:"Per playbook: 'If identity cannot be verified, end the call and record verification failure.'"}
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;

    function startQuiz() {
      const tag = document.getElementById("sectionSelect").value;
      currentQuestions = QUESTIONS.filter(q => q.section === tag);
      currentIndex = 0;
      score = 0;
      document.getElementById("result").textContent = "";
      showQuestion();
    }

    function showQuestion() {
      const quizDiv = document.getElementById("quiz");
      quizDiv.innerHTML = "";
      if (currentIndex < currentQuestions.length) {
        const q = currentQuestions[currentIndex];
        quizDiv.innerHTML = `
          <div class="question-title">${currentIndex+1}. ${q.q}</div>
          <div class="options">
            ${q.options.map((opt,j)=>`<label><input type="radio" name="q${currentIndex}" value="${j}"> ${opt}</label>`).join("")}
          </div>
          <div class="feedback" id="fb${currentIndex}" style="display:none;"></div>
        `;
        document.getElementById("submitBtn").style.display = "inline-block";
        document.getElementById("nextBtn").style.display = "none";
      } else {
        document.getElementById("quiz").innerHTML = "<div class='question-title'>Quiz complete!</div>";
        document.getElementById("submitBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("result").textContent = `Final Score: ${score} out of ${currentQuestions.length}`;
      }
    }

    function submitAnswer() {
      const q = currentQuestions[currentIndex];
      const selected = document.querySelector(`input[name="q${currentIndex}"]:checked`);
      const fb = document.getElementById(`fb${currentIndex}`);
      fb.style.display = "block";
      const defText = q.term && DEFINITIONS[q.term] ? `Definition: ${DEFINITIONS[q.term]}` : "";
      const langText = q.playbookLang ? `Playbook Language: ${q.playbookLang}` : "";
      if (selected && parseInt(selected.value) === q.a) {
        score++;
        fb.className = "feedback correct";
        fb.innerHTML = `✅ Correct — ${q.expl}<br>${defText}<br>${langText}`;
      } else if (selected) {
        fb.className = "feedback incorrect";
        fb.innerHTML = `❌ Incorrect — ${q.expl}<br>${defText}<br>${langText}`;
      } else {
        fb.className = "feedback incorrect";
        fb.innerHTML = `⚠️ No answer selected — ${q.expl}<br>${defText}<br>${langText}`;
      }
      document.getElementById("submitBtn").style.display = "none";
      document.getElementById("nextBtn").style.display = "inline-block";
    }

    function nextQuestion() {
      currentIndex++;
      showQuestion();
    }
  </script>
</body>
</html>
